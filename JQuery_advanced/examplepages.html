<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaWiki API Search with Pagination</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>MediaWiki API Search with Pagination</h1>
    <input type="text" id="search-term" placeholder="Enter search term">
    <button id="search-button">Search</button>
    <div id="results"></div>
    <ul id="pagination"></ul>

    <script>
        $(document).ready(function() {
            // Apply CSS styles using jQuery
            $('#pagination').css({
                'display': 'flex',
                'list-style-type': 'none',
                'padding': '0'
            });

            function stylePaginationItems() {
                $('#pagination li').css({
                    'margin': '0 5px',
                    'cursor': 'pointer',
                    'padding': '5px 10px',
                    'border': '1px solid #ccc',
                    'border-radius': '5px'
                });

                $('#pagination li').hover(
                    function() {
                        $(this).css('background-color', '#f0f0f0');
                    },
                    function() {
                        $(this).css('background-color', '');
                    }
                );
            }

            $('#search-button').click(function() {
                var searchTerm = $('#search-term').val();
                if (searchTerm) {
                    queryWikipedia(searchTerm, 0, 10); // Initial search with offset 0 and 10 items per page
                } else {
                    alert('Please enter a search term.');
                }
            });

            function queryWikipedia(searchTerm, offset, itemsPerPage) {
                $.ajax({
                    url: 'https://en.wikipedia.org/w/api.php',
                    data: {
                        action: 'query',
                        list: 'search',
                        srsearch: searchTerm,
                        srlimit: itemsPerPage,
                        sroffset: offset,
                        format: 'json',
                        origin: '*'
                    },
                    dataType: 'json',
                    success: function(data) {
                        var results = data.query.search;
                        $('#results').empty(); // Clear previous results
                        $.each(results, function(index, result) {
                            var resultHtml = '<div>';
                            resultHtml += '<h2>' + result.title + '</h2>';
                            resultHtml += '<p>' + result.snippet + '</p>';
                            resultHtml += '<p><strong>Page ID:</strong> ' + result.pageid + '</p>';
                            resultHtml += '</div>';
                            $('#results').append(resultHtml);
                        });
                        createPagination(data.query.searchinfo.totalhits, itemsPerPage, offset);
                    },
                    error: function(xhr, status, error) {
                        console.error('Error fetching data from MediaWiki API:', error);
                        $('#results').html('<p>An error occurred while fetching results.</p>');
                    }
                });
            }

            function createPagination(numberOfItems, itemsPerPage, currentOffset) {
                $('#pagination').empty(); // Clear previous pagination

                var totalPages = Math.ceil(numberOfItems / itemsPerPage);
                for (var i = 0; i < totalPages; i++) {
                    var offset = i * itemsPerPage;
                    var pageNumber = i + 1;
                    var pageItem = $('<li>' + pageNumber + '</li>');

                    // Attach click event to each page item
                    pageItem.click((function(offset) {
                        return function() {
                            var searchTerm = $('#search-term').val();
                            queryWikipedia(searchTerm, offset, itemsPerPage);
                        };
                    })(offset));

                    $('#pagination').append(pageItem);
                }

                // Apply styles to pagination items
                stylePaginationItems();
            }
        });
    </script>
</body>
</html>
