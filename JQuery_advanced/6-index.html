<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>
        <meta charset="utf-8" />
        <title>Task 5</title>

    </head>
    <body>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script type="application/javascript">
        
    $(document).ready(function() {
        function createFamilyTree() {
            var table = $(`<table id="my-table"></table>`);
            var thead = $(`<thead></thead>`);
            var tbody = $(`<tbody></tbody>`);

            var headerRow =  $(`<tr></tr>`);
            headerRow.append('<th>Firstname</th>');
            headerRow.append('<th>Lastname</th>');
            thead.append(headerRow);
            table.append(thead);
            table.append(tbody);
            $('body').append(table);
        }
    
        function addNewMember(firstName, lastName, position) {
            var row = $(`<tr></tr>`);
            if (position === "Before"){
                row.prepend(`<td>${firstName}</td>`);
                row.prepend(`<td>${lastName}</td>`); 
                row.prepend('<td id="xtd"><span class="remove-row">(x)</span></td>');
                $("tbody", "#my-table").prepend(row); 
            }
            else {
                row.append(`<td>${firstName}</td>`);
                row.append(`<td>${lastName}</td>`); 
                row.append('<td id="xtd"><span class="remove-row">(x)</span></td>');
                $("tbody", "#my-table").append(row); 
            }
        }

        function createForm() {
            var table = $(`<table id="inputTable"></table>`);
            let row = $('<tr></tr>');

            let firstTxt = $('<input>').attr('type', 'text').attr('name', 'txtFirst').attr('placeholder', 'Firstname');
            textCell = $('<td></td>').append(firstTxt);
            row.append(textCell);

            let secondTxt = $('<input>').attr('type', 'text').attr('name', 'txtSecond').attr('placeholder', 'Lastname');
            textCell = $('<td></td>').append(secondTxt);
            row.append(textCell);

            let selectInput = $('<select></select>').attr('name', 'select-input');
                    selectInput.append('<option value="Before">Before</option>');
                    selectInput.append('<option value="After">After</option>');
                    var selectCell = $('<td></td>').append(selectInput);
                    row.append(selectCell);

            var submitButton = $('<button class="addRow">Submit</button>');
            var submitCell = $('<td></td>').append(submitButton);
            row.append(submitCell);

            table.append(row);
            $("body").append(table);


            }
        
            // addNewMember('Guillaume','Salva','before');
            // addNewMember('Arielle','Snizt','before');
            // addNewMember('Fanette','Snizt','before');
            // addNewMember('Gerard','Snizt','before');
            // addNewMember('Victor','Salva','before');

        createForm();
        createFamilyTree();


            $('#my-table #xtd').css('background-color', 'orange');

            $('#my-table').on('click', '.remove-row',function() {
                $(this).closest('tr').remove();
            });

            $('#inputTable').on('click', '.addRow',function() {
                var row = $(this).closest('tr');
                var txtFirst = row.find('input[name^="txtFirst"]').val();
                var txtSecond = row.find('input[name^="txtSecond"]').val();
                var selectValue = row.find('select').val();
                addNewMember(txtFirst, txtSecond ,selectValue);
            });
         // Apply background color to the second cell of each row
            // $('td').each(function() {
            //     $(this).find('td').eq(1).css('background-color', 'yellow');
    })
    </script>
    </body>

</html>